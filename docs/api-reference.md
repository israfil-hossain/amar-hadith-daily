# üåê API Reference Documentation

## Overview
‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ application ‡¶è‡¶∞ comprehensive API documentation‡•§ ‡¶∏‡¶¨ endpoints RESTful design pattern follow ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç JSON format ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡•§

## üîê Authentication
‡¶∏‡¶¨ protected endpoints ‡¶è Supabase JWT token ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§

```typescript
// Headers for authenticated requests
{
  "Authorization": "Bearer <supabase_jwt_token>",
  "Content-Type": "application/json"
}
```

## üìö Hadith Endpoints

### GET /api/hadith/daily
‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ retrieve ‡¶ï‡¶∞‡ßá‡•§

**Request:**
```http
GET /api/hadith/daily
Authorization: Bearer <token>
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "hadith_number": "‡ßß",
      "text_arabic": "ÿ•ŸêŸÜŸéŸëŸÖŸéÿß ÿßŸÑŸíÿ£ŸéÿπŸíŸÖŸéÿßŸÑŸè ÿ®ŸêÿßŸÑŸÜŸêŸëŸäŸéŸëÿßÿ™Ÿê",
      "text_bangla": "‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶Ø‡¶º‡¶á ‡¶∏‡¶ï‡¶≤ ‡¶ï‡¶æ‡¶ú ‡¶®‡¶ø‡¶Ø‡¶º‡¶§‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞‡¶∂‡ßÄ‡¶≤",
      "text_english": "Actions are but by intention",
      "narrator": "‡¶â‡¶Æ‡¶∞ ‡¶á‡¶¨‡¶®‡ßÅ‡¶≤ ‡¶ñ‡¶æ‡¶§‡ßç‡¶§‡¶æ‡¶¨ (‡¶∞‡¶æ.)",
      "book": {
        "name_bangla": "‡¶∏‡¶π‡ßÄ‡¶π ‡¶¨‡ßÅ‡¶ñ‡¶æ‡¶∞‡ßÄ",
        "name_arabic": "ÿµÿ≠Ÿäÿ≠ ÿßŸÑÿ®ÿÆÿßÿ±Ÿä"
      },
      "category": {
        "name_bangla": "‡¶à‡¶Æ‡¶æ‡¶® ‡¶ì ‡¶Ü‡¶ï‡ßÄ‡¶¶‡¶æ",
        "icon": "üïå",
        "color": "#10B981"
      },
      "is_read": false,
      "is_favorited": false,
      "user_rating": null
    }
  ]
}
```

### GET /api/hadith/search
‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ search ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§

**Request:**
```http
GET /api/hadith/search?q=‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú&category=prayer&book=bukhari&page=1&limit=10
```

**Query Parameters:**
- `q` (string): Search query
- `category` (string): Category filter
- `book` (string): Book filter
- `difficulty` (string): beginner|intermediate|advanced
- `page` (number): Page number (default: 1)
- `limit` (number): Results per page (default: 10)

**Response:**
```json
{
  "success": true,
  "data": {
    "hadith": [...],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 150,
      "totalPages": 15
    },
    "filters": {
      "categories": [...],
      "books": [...],
      "difficulties": [...]
    }
  }
}
```

### POST /api/hadith/rate
‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ rating ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§

**Request:**
```http
POST /api/hadith/rate
Authorization: Bearer <token>
Content-Type: application/json

{
  "hadith_id": "uuid",
  "translation_quality": 5,
  "explanation_quality": 4,
  "overall_rating": 5,
  "comment": "‡¶ö‡¶Æ‡ßé‡¶ï‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Rating submitted successfully"
}
```

### POST /api/hadith/favorite
‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ favorite/unfavorite ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§

**Request:**
```http
POST /api/hadith/favorite
Authorization: Bearer <token>
Content-Type: application/json

{
  "hadith_id": "uuid",
  "is_favorited": true
}
```

### POST /api/hadith/mark-read
‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶™‡¶°‡¶º‡¶æ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá mark ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§

**Request:**
```http
POST /api/hadith/mark-read
Authorization: Bearer <token>
Content-Type: application/json

{
  "hadith_id": "uuid"
}
```

## üë§ User Endpoints

### GET /api/user/profile
User profile information‡•§

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "email": "user@example.com",
    "full_name": "John Doe",
    "username": "johndoe",
    "avatar_url": "https://...",
    "role": "user",
    "streak_count": 15,
    "total_hadith_read": 150,
    "points": 1250,
    "level": 3,
    "preferred_language": "bn",
    "notification_settings": {...},
    "privacy_settings": {...}
  }
}
```

### PUT /api/user/profile
User profile update ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§

**Request:**
```http
PUT /api/user/profile
Authorization: Bearer <token>
Content-Type: application/json

{
  "full_name": "Updated Name",
  "bio": "Islamic knowledge seeker",
  "location": "Dhaka, Bangladesh",
  "preferred_language": "bn"
}
```

### GET /api/user/progress
User ‡¶è‡¶∞ progress statistics‡•§

**Query Parameters:**
- `period` (string): daily|weekly|monthly|yearly
- `start_date` (string): YYYY-MM-DD format
- `end_date` (string): YYYY-MM-DD format

**Response:**
```json
{
  "success": true,
  "data": {
    "current_streak": 15,
    "longest_streak": 25,
    "total_hadith_read": 150,
    "total_time_spent": 1200,
    "level": 3,
    "points": 1250,
    "achievements_count": 8,
    "daily_progress": [
      {
        "date": "2024-01-01",
        "hadith_read_count": 3,
        "time_spent_minutes": 15,
        "streak_maintained": true
      }
    ],
    "weekly_summary": {
      "total_hadith_read": 21,
      "average_daily": 3,
      "streak_days": 7,
      "completed_days": 7
    }
  }
}
```

### GET /api/user/achievements
User ‡¶è‡¶∞ unlocked achievements‡•§

**Response:**
```json
{
  "success": true,
  "data": {
    "unlocked": [
      {
        "id": "uuid",
        "name_bangla": "‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡¶¶‡¶ï‡ßç‡¶∑‡ßá‡¶™",
        "description_bangla": "‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶™‡¶°‡¶º‡ßá‡¶õ‡ßá‡¶®",
        "icon": "üéØ",
        "badge_color": "#10B981",
        "points_reward": 10,
        "earned_at": "2024-01-01T00:00:00Z"
      }
    ],
    "available": [
      {
        "id": "uuid",
        "name_bangla": "‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§ ‡¶™‡¶æ‡¶†‡¶ï",
        "description_bangla": "‡ß≠ ‡¶¶‡¶ø‡¶® ‡¶ß‡¶æ‡¶∞‡¶æ‡¶¨‡¶æ‡¶π‡¶ø‡¶ï ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶™‡¶°‡¶º‡ßÅ‡¶®",
        "progress": {
          "current": 5,
          "required": 7
        }
      }
    ]
  }
}
```

### GET /api/user/favorites
User ‡¶è‡¶∞ favorite hadith list‡•§

**Response:**
```json
{
  "success": true,
  "data": {
    "favorites": [...],
    "collections": [
      {
        "id": "uuid",
        "name": "‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏",
        "description": "‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π",
        "hadith_count": 15,
        "is_public": false
      }
    ]
  }
}
```

## üìä Analytics Endpoints

### GET /api/analytics/dashboard
Admin dashboard analytics‡•§

**Authorization:** Admin role required

**Response:**
```json
{
  "success": true,
  "data": {
    "users": {
      "total": 1000,
      "active_today": 150,
      "new_this_week": 25
    },
    "hadith": {
      "total": 5000,
      "verified": 4800,
      "pending": 200
    },
    "engagement": {
      "daily_reads": 450,
      "favorites_added": 75,
      "contributions": 5
    },
    "popular_content": [...]
  }
}
```

## üîî Notification Endpoints

### GET /api/notifications
User notifications‡•§

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "type": "achievement",
      "title": "‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶ú‡¶®!",
      "message": "‡¶Ü‡¶™‡¶®‡¶ø '‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§ ‡¶™‡¶æ‡¶†‡¶ï' ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®",
      "data": {
        "achievement_id": "uuid"
      },
      "is_read": false,
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

### PUT /api/notifications/:id/read
Notification read ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá mark ‡¶ï‡¶∞‡¶æ‡•§

**Response:**
```json
{
  "success": true,
  "message": "Notification marked as read"
}
```

## üìß Email Endpoints

### POST /api/email/welcome
Welcome email send ‡¶ï‡¶∞‡¶æ (internal use)‡•§

**Request:**
```json
{
  "userEmail": "user@example.com",
  "userName": "John Doe"
}
```

### POST /api/email/daily-hadith
Daily hadith email send ‡¶ï‡¶∞‡¶æ‡•§

**Request:**
```json
{
  "userEmail": "user@example.com",
  "userName": "John Doe",
  "hadithList": [...]
}
```

## ü§ù Community Endpoints

### POST /api/contributions/submit
‡¶®‡¶§‡ßÅ‡¶® hadith contribution submit ‡¶ï‡¶∞‡¶æ‡•§

**Request:**
```http
POST /api/contributions/submit
Authorization: Bearer <token>
Content-Type: application/json

{
  "hadith_data": {
    "text_arabic": "...",
    "text_bangla": "...",
    "narrator": "...",
    "reference": "...",
    "category_id": "uuid",
    "book_id": "uuid"
  }
}
```

### GET /api/contributions/pending
Pending contributions (Moderator only)‡•§

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "contributor": {
        "name": "John Doe",
        "email": "john@example.com"
      },
      "hadith_data": {...},
      "status": "pending",
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

### PUT /api/contributions/:id/review
Contribution review ‡¶ï‡¶∞‡¶æ (Moderator only)‡•§

**Request:**
```json
{
  "status": "approved", // approved|rejected
  "review_notes": "Excellent contribution"
}
```

## üïå Prayer Times Endpoints

### GET /api/prayer-times
Prayer times for location‡•§

**Query Parameters:**
- `lat` (number): Latitude
- `lng` (number): Longitude
- `date` (string): YYYY-MM-DD format (optional)

**Response:**
```json
{
  "success": true,
  "data": {
    "fajr": "05:30",
    "dhuhr": "12:15",
    "asr": "15:45",
    "maghrib": "18:00",
    "isha": "19:30",
    "date": "2024-01-01",
    "location": "Dhaka, Bangladesh"
  }
}
```

## ‚ùå Error Responses

### Standard Error Format
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid input data",
    "details": {
      "field": "email",
      "issue": "Invalid email format"
    }
  }
}
```

### Common Error Codes
- `UNAUTHORIZED` (401): Invalid or missing token
- `FORBIDDEN` (403): Insufficient permissions
- `NOT_FOUND` (404): Resource not found
- `VALIDATION_ERROR` (400): Invalid input data
- `RATE_LIMIT_EXCEEDED` (429): Too many requests
- `INTERNAL_ERROR` (500): Server error

## üîÑ Rate Limiting

### Limits per endpoint:
- **Authentication:** 5 requests/minute
- **Search:** 30 requests/minute
- **General API:** 100 requests/minute
- **Admin API:** 200 requests/minute

### Rate limit headers:
```http
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1640995200
```

## üìù Request/Response Examples

### Complete Hadith Object
```json
{
  "id": "uuid",
  "hadith_number": "‡ßß",
  "book": {
    "id": "uuid",
    "name_bangla": "‡¶∏‡¶π‡ßÄ‡¶π ‡¶¨‡ßÅ‡¶ñ‡¶æ‡¶∞‡ßÄ",
    "name_arabic": "ÿµÿ≠Ÿäÿ≠ ÿßŸÑÿ®ÿÆÿßÿ±Ÿä",
    "name_english": "Sahih al-Bukhari"
  },
  "category": {
    "id": "uuid",
    "name_bangla": "‡¶à‡¶Æ‡¶æ‡¶® ‡¶ì ‡¶Ü‡¶ï‡ßÄ‡¶¶‡¶æ",
    "name_arabic": "ÿßŸÑÿ•ŸäŸÖÿßŸÜ ŸàÿßŸÑÿπŸÇŸäÿØÿ©",
    "name_english": "Faith and Belief",
    "icon": "üïå",
    "color": "#10B981"
  },
  "chapter_bangla": "‡¶ì‡¶π‡ßÄ‡¶∞ ‡¶∏‡ßÇ‡¶ö‡¶®‡¶æ",
  "chapter_arabic": "ÿ®ÿØÿ° ÿßŸÑŸàÿ≠Ÿä",
  "text_arabic": "ÿ•ŸêŸÜŸéŸëŸÖŸéÿß ÿßŸÑŸíÿ£ŸéÿπŸíŸÖŸéÿßŸÑŸè ÿ®ŸêÿßŸÑŸÜŸêŸëŸäŸéŸëÿßÿ™Ÿê",
  "text_bangla": "‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶Ø‡¶º‡¶á ‡¶∏‡¶ï‡¶≤ ‡¶ï‡¶æ‡¶ú ‡¶®‡¶ø‡¶Ø‡¶º‡¶§‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞‡¶∂‡ßÄ‡¶≤",
  "text_english": "Actions are but by intention",
  "narrator": "‡¶â‡¶Æ‡¶∞ ‡¶á‡¶¨‡¶®‡ßÅ‡¶≤ ‡¶ñ‡¶æ‡¶§‡ßç‡¶§‡¶æ‡¶¨ (‡¶∞‡¶æ.)",
  "grade": "‡¶∏‡¶π‡ßÄ‡¶π",
  "reference": "‡¶∏‡¶π‡ßÄ‡¶π ‡¶¨‡ßÅ‡¶ñ‡¶æ‡¶∞‡ßÄ, ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Ç ‡ßß",
  "explanation": "‡¶è‡¶á ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏‡¶ü‡¶ø ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶Æ‡ßå‡¶≤‡¶ø‡¶ï ‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø...",
  "difficulty_level": "beginner",
  "view_count": 1250,
  "like_count": 95,
  "share_count": 25,
  "is_featured": true,
  "user_interaction": {
    "is_read": true,
    "is_favorited": false,
    "is_memorized": false,
    "rating": 5,
    "notes": "‡¶ñ‡ßÅ‡¶¨‡¶á ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏",
    "read_at": "2024-01-01T10:30:00Z"
  },
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

---

‡¶è‡¶á API documentation ‡¶∏‡¶¨ major endpoints cover ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç real-world usage examples ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßá‡•§
